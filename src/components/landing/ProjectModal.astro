---
import Link from "../Link.astro";

// src/components/Modal.astro
interface Props {
  modalId: string;
  title: string;
  tagline: string;
  imageUrl: string;
  github_url: string;
  live_url: string;
  role: string;
  status: string;
  iconEmoji: string;
  technologies: string[];
  project_image: string;
}

const {
  title,
  tagline,
  imageUrl,
  github_url,
  live_url,
  iconEmoji,
  technologies,
  modalId,
  project_image,
  ...props
} = Astro.props;
---

<div
  class="fixed inset-0 w-full h-full bg-black/70 flex justify-center items-center invisible opacity-0 transition-[opacity,visibility] duration-300 ease-in-out z-[1000] modal-overlay"
  id={modalId}
  aria-hidden="true"
>
  <div
    class="bg-white rounded-lg w-[90%] max-w-[700px] max-h-[90vh] scale-90 transition-transform duration-300 ease-in-out modal-container flex flex-col"
    role="dialog"
    aria-modal="true"
    aria-labelledby={`title-${modalId}`}
  >
    <header
      class="relative flex flex-col items-end border-b border-[#ddd] pb-4 mb-4 px-4 mt-4 modal-header shrink-0"
    >
      <button
        class="absolute -top-12 -right-8 bg-white cursor-pointer modal-close-btn rounded-full w-8 h-8 flex flex-col items-center justify-center"
        data-modal-close
        aria-label="Close modal"><img src="/cross.svg" /></button
      >
      <div class="flex flex-col md:flex-row gap-4 w-full">
        <div class="flex flex-col w-full">
          <div class="flex md:flex-row justify-between gap-2 flex-grow">
            <div class="flex items-center">
              <p
                class="text-[18px] font-sans font-medium source-serif-4-regular"
              >
                {title}
              </p>
            </div>
            <div class="flex flex-row gap-2 shrink-0">
              {
                github_url && (
                  <Link href={github_url} fontSize="15px">
                    github
                  </Link>
                )
              }
              {
                live_url && (
                  <Link href={live_url} fontSize="15px">
                    live link
                  </Link>
                )
              }
            </div>
          </div>
          <p class="text-[15px] source-sans-3-light">
            {tagline}
          </p>
          <div class="flex flex-row gap-1 flex-wrap mt-5">
            {
              technologies.map((technology) => (
                <p class="border border-slate-300 leading-6 py-0 px-2 rounded-sm text-[12px] source-sans-3-light truncate">
                  {technology}
                </p>
              ))
            }
          </div>
        </div>
      </div>
    </header>
    <main class="px-4 pb-4 overflow-y-auto modal-content flex-grow min-h-0">
      <slot />
    </main>
  </div>
</div>

<style>
  .modal-overlay.is-open {
    visibility: visible;
    opacity: 1;
  }

  .modal-overlay.is-open .modal-container {
    transform: scale(1);
  }

  .modal-content :global(p) {
    font-size: 15px;
  }
  .modal-content :global(h3) {
    margin-bottom: 0px;
    margin-top: 8px;
  }

  .modal-content :global(ul) {
    font-size: 15px;
    color: "#222939";
    font-family: "Source Sans 3", sans-serif;
    font-optical-sizing: auto;
    font-weight: 300;
    font-style: normal;
    list-style-type: circle;
    margin-left: 10px;
  }
</style>
